<div class="soft-card">
  
  <div class="card-header">
    <div class="header-left">
      <div class="icon-box">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="12" y1="20" x2="12" y2="10"></line>
          <line x1="18" y1="20" x2="18" y2="4"></line>
          <line x1="6" y1="20" x2="6" y2="16"></line>
        </svg>
      </div>
      <h3>Ventas</h3>
    </div>

    <button mat-button [matMenuTriggerFor]="menuFiltro" class="filter-btn">
      {{ filtroActual }}
      <mat-icon>expand_more</mat-icon>
    </button>
    
    <mat-menu #menuFiltro="matMenu">
      <button mat-menu-item (click)="cambiarFiltro('SEMANA')">Esta Semana</button>
      <button mat-menu-item (click)="cambiarFiltro('MES')">Este Mes</button>
      <button mat-menu-item (click)="cambiarFiltro('ANIO')">Este AÃ±o</button>
    </mat-menu>
  </div>

  <div *ngIf="cargando" class="state-container">
    <div class="spinner"></div>
  </div>

  <div *ngIf="error && !cargando" class="state-container">
    <p class="error-text">{{ error }}</p>
    <button class="retry-btn" (click)="cargarDatos()">Reintentar</button>
  </div>

  <div *ngIf="!cargando && !error" class="chart-wrapper">
    <apx-chart
      [series]="chartOptions.series!"
      [chart]="chartOptions.chart!"
      [dataLabels]="chartOptions.dataLabels!"
      [plotOptions]="chartOptions.plotOptions!"
      [yaxis]="chartOptions.yaxis!"
      [xaxis]="chartOptions.xaxis!"
      [tooltip]="chartOptions.tooltip!"
      [grid]="chartOptions.grid!"
      [fill]="chartOptions.fill!"
      [colors]="chartOptions.colors!"
    ></apx-chart>
  </div>

  <div *ngIf="!cargando && !error" class="card-footer">
    <div class="footer-item">
      <span class="label">Total</span>
      <span class="value">S/ {{ totalPeriodo | number:'1.2-2' }}</span>
    </div>
    <div class="divider"></div>
    <div class="footer-item">
      <span class="label">Promedio</span>
      <span class="value">S/ {{ promedioDiario | number:'1.2-2' }}</span>
    </div>
    <div class="divider"></div>
    <div class="footer-item">
      <span class="label">Transacciones</span>
      <span class="value">{{ transacciones }}</span>
    </div>
  </div>

</div>