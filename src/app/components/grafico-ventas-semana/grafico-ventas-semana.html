<div class="grafico-container">
  
  <div class="grafico-header">
    <div class="grafico-titulo">
      <span class="grafico-icono">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="18" y1="20" x2="18" y2="10"></line>
          <line x1="12" y1="20" x2="12" y2="4"></line>
          <line x1="6" y1="20" x2="6" y2="14"></line>
        </svg>
      </span>
      <h2>Ventas de la Semana</h2>
    </div>
    <a href="#" class="ver-detalles" (click)="$event.preventDefault()">
      Ver detalles 
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-left: 4px; vertical-align: middle;">
        <line x1="5" y1="12" x2="19" y2="12"></line>
        <polyline points="12 5 19 12 12 19"></polyline>
      </svg>
    </a>
  </div>

  <div *ngIf="cargando" class="loading-container">
    <div class="spinner"></div>
    <p>Cargando datos...</p>
  </div>

  <div *ngIf="error && !cargando" class="error-message">
    <p>{{ error }}</p>
    <button (click)="cargarVentasSemana()" class="btn-retry">Reintentar</button>
  </div>

  <div *ngIf="!cargando && !error" class="grafico-canvas">
    <canvas 
      baseChart
      [type]="barChartType"
      [data]="barChartData"
      [options]="barChartOptions">
    </canvas>
  </div>

  <div *ngIf="!cargando && !error && ventasSemana.length > 0" class="grafico-resumen">
    <div class="resumen-item">
      <span class="resumen-label">Total Semana:</span>
      <span class="resumen-valor">
        S/ {{ calcularTotalSemana() | number:'1.2-2' }}
      </span>
    </div>
    <div class="resumen-item">
      <span class="resumen-label">Promedio Diario:</span>
      <span class="resumen-valor">
        S/ {{ calcularPromedioDiario() | number:'1.2-2' }}
      </span>
    </div>
    <div class="resumen-item">
      <span class="resumen-label">Transacciones:</span>
      <span class="resumen-valor">
        {{ calcularTotalTransacciones() }}
      </span>
    </div>
  </div>

</div>